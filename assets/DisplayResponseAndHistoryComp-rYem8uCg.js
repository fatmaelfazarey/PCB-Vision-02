import{r as c,j as e}from"./index-ykkmzoko.js";import{b as D,c as O}from"./assets-CT1zWT68.js";const S=({imageSrc:t,zoomLevel:a=3,spotSize:m=200})=>{const o=c.useRef(null),h=c.useRef(null),[x,u]=c.useState({x:0,y:0}),[f,d]=c.useState(!1),[j,b]=c.useState({width:0,height:0});c.useEffect(()=>{const i=new Image;i.onload=()=>{b({width:i.naturalWidth,height:i.naturalHeight})},i.src=t},[t]);const y=i=>{if(!o.current||!h.current)return;const w=o.current,{left:v,top:l}=w.getBoundingClientRect(),n=(i.clientX-v)/w.offsetWidth*100,r=(i.clientY-l)/w.offsetHeight*100;u({x:n,y:r}),d(!0)},N=()=>{d(!1)};return e.jsxs("div",{ref:o,style:{position:"relative",display:"inline-block",maxWidth:"100%",cursor:"crosshair"},onMouseMove:y,onMouseLeave:N,children:[e.jsx("img",{ref:h,src:t,alt:"Zoomable",style:{maxWidth:"100%",height:"auto",display:"block"}}),f&&e.jsx("div",{style:{position:"absolute",width:`${m}px`,height:`${m}px`,borderRadius:"50%",border:"1px solid rgba(255, 255, 255, 0.8)",boxShadow:`
                0 0 0 1px rgba(0, 0, 0, 0.1),
                0 4px 20px rgba(0, 0, 0, 0.15),
                0 8px 30px rgba(0, 0, 0, 0.2)
              `,pointerEvents:"none",left:`calc(${x.x}% - ${m/2}px)`,top:`calc(${x.y}% - ${m/2}px)`,backgroundImage:`url(${t})`,backgroundRepeat:"no-repeat",backgroundSize:`${j.width}px ${j.height}px`,backgroundPosition:`${x.x}% ${x.y}%`,transform:`scale(${a})`,transformOrigin:"center center",zIndex:10,transition:"transform 0.1s ease-out",backdropFilter:"blur(1px)",overflow:"hidden"},children:e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",boxShadow:"inset 0 0 10px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)"}})})]})},k=t=>{const a=o=>o.replace(/[^a-zA-Z]/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1).toLowerCase()).join(" ").trim(),m=o=>!o||Object.keys(o).length===0?null:Object.entries(o).map(([h,x],u)=>{const[f,d,j,b]=x;return e.jsxs("g",{children:[e.jsx("rect",{x:f,y:d,width:j-f,height:b-d,stroke:"yellow",strokeWidth:"1",fill:"none"}),e.jsx("text",{x:f,y:d-3,fill:"yellow",fontSize:"10",fontWeight:"400",children:a(h)})]},`${h}-${u}`)});return e.jsx("svg",{width:"100",height:"100",className:"absolute top-0 left-0 w-full h-full",children:m(t.detections)})},A=t=>{let a=!1;const m=l=>{const[n,r]=c.useState(null);return Object.keys(l.detections).length===0?(a=!0,e.jsx("p",{className:"text-xl text-title",children:"Defect Name : no defects"})):Object.entries(l.statistics).map(([s,g],p)=>v(i(s))&&e.jsxs("div",{className:"w-[100%] mb-4",children:[e.jsxs("p",{className:"text-xl text-title",children:["Defect Name : ",i(s)]}),e.jsxs("p",{className:"text-xl text-title",children:["Statistics : ",g," "]}),e.jsxs("p",{className:"text-lg font-[400] text-sub-text cursor-pointer",onClick:()=>r(n===s?null:s),children:["About ",i(s),"    ",e.jsx("svg",{className:`w-4 h-4 ml-1 transition-transform inline scale-[1.6] ${n===s?"rotate-180":""}`,fill:"#777777",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsx("p",{className:`text-sm font-[400] text-title ${n===s?"block":"hidden"}`,children:D[i(s)]})]},p))},o=l=>Object.keys(l.statistics).length===0?(a=!0,e.jsx("p",{className:"w-full text-center text-lg font-[400] text-sub-text",children:"No Components"})):e.jsxs("ul",{className:"w-full ",children:[" ",Object.entries(l.statistics).map(([n,r],s)=>e.jsxs("li",{className:"flex items-center gap-2 text-xl text-title ",children:[e.jsx("span",{className:"w-2 h-2 border-2 border-sub-text rounded-full flex-shrink-0"}),e.jsxs("span",{children:[O[n]," : ",r]})]},s))]}),h=l=>{const[n,r]=c.useState(null);return l&&Object.keys(l.detections).length===0?(a=!0,e.jsx("p",{className:"text-xl text-title",children:"Defect Name : no defects"})):Object.entries(l.statistics).map(([s,g],p)=>e.jsxs("div",{className:"w-[100%] mb-4",children:[e.jsxs("p",{className:"text-xl text-title",children:["Defect Name : ",i(s)]}),e.jsxs("p",{className:"text-xl text-title",children:["Statistics : ",g," "]}),e.jsxs("p",{className:"text-lg font-[400] text-sub-text cursor-pointer",onClick:()=>r(n===s?null:s),children:["About ",i(s),"    ",e.jsx("svg",{className:`w-4 h-4 ml-1 transition-transform inline scale-[1.6] ${n===s?"rotate-180":""}`,fill:"#777777",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsx("p",{className:`text-sm font-[400] text-title ${n===s?"block":"hidden"}`,children:D[i(s)]})]},p))},x=l=>(Object.keys(l.detections).length===0&&(a=!0),e.jsx(e.Fragment,{children:Object.keys(l.detections).length===0?e.jsx("p",{className:"text-xl text-title",children:"Defect Name : no defects"}):Object.entries(l.statistics).map(([n,r],s)=>v(i(n))&&e.jsxs("div",{className:"w-[100%] ",children:[e.jsxs("p",{className:"text-xl text-title",children:["Defect Name : ",i(n)]}),e.jsxs("p",{className:"text-xl text-title",children:["Statistics : ",r," "]})]},s))})),u=()=>e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl text-title",children:["Operant : ",y||t.Operator_ID," "]}),e.jsxs("p",{className:"text-xl text-title",children:["Created At : ",t.CreatedAt," "]}),e.jsxs("p",{className:"text-xl text-title",children:[!a&&"Status :"+t.Pass_Fail.Status," "]}),e.jsxs("p",{className:"text-xl text-title",children:[!a&&"Engineer :"+j||t.Pass_Fail.Modified_By," "]}),e.jsxs("p",{className:"text-xl text-title",children:[!a&&"Modified Time :"+t.Pass_Fail.Modified_Time," "]})]}),f=()=>e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl text-title",children:[!a&&"Status :"+t.Pass_Fail.Status," "]}),e.jsxs("p",{className:"text-xl text-title",children:[!a&&"Modified Time :"+t.Pass_Fail.Modified_Time," "]})]}),d=async(l,n)=>{const r=`http://localhost:3002/employees/${l}`;try{const s=await fetch(r);if(!s.ok)throw new Error("Failed to fetch users");const g=await s.json();return g?(n(g.Name),g.Name):(alert("Invalid user. Please try again."),null)}catch(s){console.error("Error logging in:",s)}},[j,b]=c.useState(),[y,N]=c.useState();c.useEffect(()=>{(t.Engineer_ID||t.Operator_ID)&&(d(t.Engineer_ID,b),d(t.Operator_ID,N))});const i=l=>l.replace(/[^a-zA-Z]/g," ").split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ").trim(),w=new Set,v=l=>w.has(l)?!1:(w.add(l),!0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"defects_model w-full flex flex-col lg:flex-row justify-between items-center",children:[e.jsx("div",{className:"lg:w-[50%] w-full",children:t.isCompanyLogin?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-xl font-semibold text-title",children:["SN : ",t.SN]}),t.isEngineerView===!1&&e.jsxs(e.Fragment,{children:[t.role==="Leader"&&u(),t.role==="Engineer"&&f()]}),t.image1&&t.role==="Leader"&&x(t.defects),t.image1&&t.role==="Engineer"&&m(t.defects)]}):e.jsx(e.Fragment,{children:t.image1&&h(t.defects)})}),t.image1&&e.jsx("div",{className:"lg:w-[50%] w-full  md:items-end overflow-x-scroll scrollHedden",children:e.jsx("div",{className:"relative w-[400px] min-w-24 overflow-x-scroll scrollHedden float-none lg:float-right ",id:"image1",children:t.magnify?e.jsx("div",{className:"w-fit h-fit",children:e.jsx(S,{imageSrc:t.image1,zoomLevel:2,spotSize:40})}):e.jsxs("div",{className:"w-fit h-fit",children:[e.jsx(k,{detections:t.defects.detections}),e.jsx("img",{src:t.image1,alt:"pcb"})]})})})]}),e.jsxs("div",{className:"components_model  w-full flex flex-col lg:flex-row justify-between",children:[t.image2&&e.jsxs("div",{className:"flex flex-col w-fit",children:[e.jsx("u",{className:"text-lg font-[400] text-sub-text",children:"Components"}),e.jsx("div",{className:" w-full",children:o(t.components)})]}),t.image2&&e.jsx("div",{className:"lg:w-[50%] w-full  md:items-end overflow-x-scroll scrollHedden",children:e.jsx("div",{className:"relative w-[400px] min-w-24 overflow-x-scroll scrollHedden  float-none lg:float-right",id:"image2",children:t.magnify?e.jsx("div",{className:"w-fit h-fit",children:e.jsx(S,{imageSrc:t.image2,zoomLevel:2,spotSize:40})}):e.jsxs("div",{className:"w-fit h-fit",children:[e.jsx(k,{detections:t.components.components}),e.jsx("img",{src:t.image2,alt:"pcb"})]})})})]})]})};export{A as D};
