import{u as v,r as l,A as N,f as k,U as C,j as e}from"./index-ykkmzoko.js";import{a as w}from"./assets-CT1zWT68.js";const F=()=>{const u=v(),{language:h,t:a}=l.useContext(N),[r,c]=l.useState({}),[s,b]=l.useState({Email:"",Phone:"",Password:"",ConfirmPassword:""}),[d,P]=l.useState(!1),[o,m]=l.useState(!1),p=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/,i=l.useCallback(t=>{const{name:n,value:j}=t.target;b(x=>({...x,[n]:j})),r[n]&&c(x=>({...x,[n]:""}))},[r]),f=l.useCallback(()=>{const t={};return d?(s.Password.trim()?p.test(s.Password)||(t.Password=a("Password must contain at least 8 characters, including uppercase, lowercase, number, and special character")):t.Password=a("Password is required"),s.ConfirmPassword.trim()?s.Password!==s.ConfirmPassword&&(t.ConfirmPassword=a("Passwords do not match")):t.ConfirmPassword=a("Please confirm your password")):(s.Email.trim()||(t.Email=a("Email is required")),s.Phone.trim()||(t.Phone=a("Phone is required"))),c(t),Object.keys(t).length===0},[s,d,a]),g=l.useCallback(async t=>{if(t.preventDefault(),m(!0),!f()){m(!1);return}try{d?await C(s.Email,s.Password,s.ConfirmPassword)&&u("/login"):await k(s.Email,s.Phone)&&P(!0)}catch(n){console.error("Password update error:",n),c({...r,serverError:a("Failed to update password. Please try again.")})}finally{m(!1)}},[s,d,f,u,a]);return e.jsxs("div",{className:"relative bg-second dark:bg-second-dark flex items-center h-screen",children:[e.jsxs("div",{className:`h-screen absolute top-0 left-0 md:relative bg-white dark:bg-black shadow-lg sm:w-130 w-[90%] flex flex-col justify-center items-center p-5 ${h==="ar"?"rounded-l-4xl":"rounded-r-4xl"}`,children:[e.jsxs("div",{className:"text-center text-sub-text flex flex-col justify-center items-center",children:[e.jsx("img",{src:w.logo,alt:"pcb"}),e.jsx("p",{className:"text-lg",children:a("Reset your password")})]}),r.serverError&&e.jsx("div",{className:"w-full p-2 mb-3 text-red-500 text-sm text-center",children:r.serverError}),e.jsxs("form",{onSubmit:g,className:"flex flex-col w-full gap-3 mt-4 mb-4 items-end",children:[d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"Password",className:"text-sub-text block text-sm",children:a("New Password")}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"Password",type:"text",value:s.Password,name:"Password",onChange:i,className:`w-full font-[400] dark:text-white rounded-xl outline-0 caret-main p-2 bg-second dark:bg-second-dark ${r.Password?"border border-red-500":""}`,disabled:o})}),r.Password&&e.jsx("span",{className:"text-red-500 text-xs mt-1 block",children:r.Password})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"ConfirmPassword",className:"text-sub-text block text-sm",children:a("Confirm Password")}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"ConfirmPassword",value:s.ConfirmPassword,name:"ConfirmPassword",type:"text",onChange:i,className:`w-full rounded-xl outline-0 caret-main p-2 bg-second dark:bg-second-dark font-[400] dark:text-white ${r.ConfirmPassword?"border border-red-500":""}`,disabled:o})}),r.ConfirmPassword&&e.jsx("span",{className:"text-red-500 text-xs mt-1 block",children:r.ConfirmPassword})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"Email",className:"text-sub-text block text-sm",children:a("Email")}),e.jsx("input",{id:"Email",name:"Email",type:"email",value:s.Email,onChange:i,className:`w-full font-[400] dark:text-white rounded-xl outline-0 caret-main p-2 bg-second dark:bg-second-dark ${r.Email?"border border-red-500":""}`,disabled:o}),r.Email&&e.jsx("span",{className:"text-red-500 text-xs mt-1",children:r.Email})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"Phone",className:"text-sub-text block text-sm",children:a("Phone")}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"Phone",value:s.Phone,name:"Phone",onChange:i,className:`w-full font-[400] dark:text-white rounded-xl outline-0 caret-main p-2 bg-second dark:bg-second-dark ${r.Phone?"border border-red-500":""}`,disabled:o})}),r.Phone&&e.jsx("span",{className:"text-red-500 text-xs mt-1",children:r.Phone})]})]}),e.jsx("button",{type:"submit",className:`w-fit bg-transparent border text-main font-bold py-2 px-4 rounded-xl opacity-90 transition hover:bg-main hover:opacity-100 hover:text-white dark:hover:text-black ${o?"opacity-50 cursor-not-allowed":""}`,disabled:o,children:a(o?"Processing...":d?"Update Password":"Verify Account")})]})]}),e.jsx("div",{className:"w-full md:w-3/5 h-full overflow-hidden flex items-center",children:e.jsx("img",{src:w.sign,alt:"Sign in illustration",className:"w-full h-full object-cover"})})]})};export{F as default};
