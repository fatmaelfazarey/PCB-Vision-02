import{r as i,A as b,j as a,b as S}from"./index-ykkmzoko.js";import{A as h,h as m,a as c}from"./AIRequestService-BuQnPe0L.js";import{A as D}from"./SharedServices-9a4KYVb0.js";import{D as A}from"./DisplayResponseAndHistoryComp-rYem8uCg.js";const E=({error:l,loading:d,responseData:s})=>{const{t:x}=i.useContext(b);return a.jsx("div",{className:"max-w-screen-xl mx-auto bg-second dark:bg-second-dark p-2 sm:p-5 gap-2 fixed_direction",children:a.jsx("div",{className:"bg-white dark:bg-black p-2 sm:p-5 rounded-xl flex flex-row justify-between gap-2 ",children:l?a.jsx("p",{className:"text-red-600 w-full text-center",children:l}):d?a.jsx("div",{className:"flex justify-center items-center w-full",children:a.jsx(S,{})}):s?a.jsx("div",{className:"w-full flex flex-col gap-2 sm:gap-4 justify-between ",children:a.jsx(A,{defects:s.Defects||{},image1:s.image1,components:s.Components||{},image2:s.image2,isCompanyLogin:!1})}):null})})},H=({isGuest:l})=>{const[d,s]=i.useState(!1),[x,u]=i.useState(null),[y,f]=i.useState(),{userId:g,t:r}=i.useContext(b),[p,n]=i.useState(!1),[e,o]=i.useState({image1:"",image2:"",userId:g,Defects:null,Components:null}),w=(t,k)=>{o(N=>({...N,[t]:k}))},j=()=>{window.location.reload()};i.useEffect(()=>{o(t=>({...t,userId:g}))},[g]);const v=async t=>{t.preventDefault(),e.userId?(s(!0),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),e.image1&&!e.image2?await m(e.image1,o):!e.image1&&e.image2?await c(e.image2,o):e.image1&&e.image2&&(await m(e.image1,o),await c(e.image2,o)),n(!0)):l?(s(!0),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),e.image1&&!e.image2?await m(e.image1,o):!e.image1&&e.image2?await c(e.image2,o):e.image1&&e.image2&&(await m(e.image1,o),await c(e.image2,o)),n(!0)):alert(r("Sorry, an error occurred. Try again later"))},C=async()=>{try{await D(e,!1),f(e)}catch(t){u(t),console.error("Error:",t)}finally{s(!1),n(!1)}};return i.useEffect(()=>{if(p)if(f(e),!l)C();else try{f(e)}catch(t){u(t),console.error("Error:",t)}finally{s(!1),n(!1)}},[p,e,r]),a.jsxs(a.Fragment,{children:[a.jsxs("form",{className:"max-w-screen-xl mx-auto mt-7 mb-7 flex flex-col gap-3 w-full",onSubmit:v,children:[a.jsxs("div",{className:"flex flex-col lg:flex-row  gap-3 w-full items-center justify-center",children:[a.jsx(h,{image:"image1",onImageUpload:w}),a.jsx(h,{image:"image2",onImageUpload:w})]}),a.jsxs("div",{className:"flex flex-row gap-3 w-full items-center justify-evenly",children:[a.jsx("input",{type:"reset",value:r("Reset"),onClick:j,className:"bg-white dark:bg-black text-main border font-bold py-2 px-4 rounded-xl transition hover:bg-main hover:opacity-100 hover:text-white hover:dark:text-black "}),a.jsx("input",{type:"submit",value:r("Submit"),className:" mr-2 border bg-main text-white dark:text-black font-bold py-2 px-4 rounded-xl opacity-90 transition hover:bg-main hover:opacity-100 "})]})]}),a.jsx(E,{loading:d,error:x,responseData:y})]})};export{H as U};
